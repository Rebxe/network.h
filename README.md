Recode with ArrayFire

seem to has many bugs
